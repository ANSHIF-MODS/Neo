function _0x1cc8(){const _0xba60bd=['-vsync','webp','save','toFormat','length','4NegHwS','data','00:00:00','packname','00:00:05','1441176ZlmHRQ','5227677KSrAqe','unlinkSync','load','-vcodec','author','3123SQFNea','setFfmpegPath','3591132vjrmOU','3718GURdVJ','-an','5ItfwvI','.webp','addOutputOptions','110rItBMD','toString','categories','libwebp','end','from','exif','30952RuFxKE','-vf','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','-loop','Image','utf-8','readUIntLE','concat','3253482OSXMod','-preset','@ffmpeg-installer/ffmpeg','mimetype','path','test','join','readFileSync','stringify','https://github.com/nazedev/naze','5333030ZIUujh','writeUIntLE','714aRGVMI','default','randomBytes','-ss','.jpg','fluent-ffmpeg','writeFileSync'];_0x1cc8=function(){return _0xba60bd;};return _0x1cc8();}const _0x2f11de=_0x29de;(function(_0x584fd3,_0x5a87e5){const _0x525985=_0x29de,_0x4a2ea7=_0x584fd3();while(!![]){try{const _0xb775f4=parseInt(_0x525985(0x1a7))/0x1*(parseInt(_0x525985(0x1c1))/0x2)+-parseInt(_0x525985(0x19b))/0x3*(parseInt(_0x525985(0x1b3))/0x4)+-parseInt(_0x525985(0x1c3))/0x5*(parseInt(_0x525985(0x1c0))/0x6)+parseInt(_0x525985(0x1b9))/0x7+parseInt(_0x525985(0x1cd))/0x8*(-parseInt(_0x525985(0x1be))/0x9)+parseInt(_0x525985(0x1a5))/0xa+parseInt(_0x525985(0x1c6))/0xb*(parseInt(_0x525985(0x1b8))/0xc);if(_0xb775f4===_0x5a87e5)break;else _0x4a2ea7['push'](_0x4a2ea7['shift']());}catch(_0x26033c){_0x4a2ea7['push'](_0x4a2ea7['shift']());}}}(_0x1cc8,0xbf20d));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require('crypto'),ff=require(_0x2f11de(0x1ac));let ffmpegPath=require(_0x2f11de(0x19d))[_0x2f11de(0x19f)];ff[_0x2f11de(0x1bf)](ffmpegPath);const webp=require('node-webpmux'),path=require('path');async function imageToWebp(_0x2ae5c5){const _0x16888d=_0x2f11de,_0x370d7a=path[_0x16888d(0x1a1)](tmpdir(),Crypto[_0x16888d(0x1a9)](0x6)[_0x16888d(0x1d3)](0x0,0x6)[_0x16888d(0x1c7)](0x24)+_0x16888d(0x1c4)),_0x52335e=path[_0x16888d(0x1a1)](tmpdir(),Crypto['randomBytes'](0x6)[_0x16888d(0x1d3)](0x0,0x6)[_0x16888d(0x1c7)](0x24)+_0x16888d(0x1ab));fs[_0x16888d(0x1ad)](_0x52335e,_0x2ae5c5),await new Promise((_0x4a8de2,_0x2c354e)=>{const _0x5c106f=_0x16888d;ff(_0x52335e)['on']('error',_0x2c354e)['on'](_0x5c106f(0x1ca),()=>_0x4a8de2(!![]))[_0x5c106f(0x1c5)]([_0x5c106f(0x1bc),_0x5c106f(0x1c9),_0x5c106f(0x1ce),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse'])[_0x5c106f(0x1b1)](_0x5c106f(0x1af))[_0x5c106f(0x1b0)](_0x370d7a);});const _0x55e328=fs[_0x16888d(0x1a2)](_0x370d7a);return fs[_0x16888d(0x1ba)](_0x370d7a),fs[_0x16888d(0x1ba)](_0x52335e),_0x55e328;}async function videoToWebp(_0x56849e){const _0x45ca01=_0x2f11de,_0x3085a0=path[_0x45ca01(0x1a1)](tmpdir(),Crypto[_0x45ca01(0x1a9)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+'.webp'),_0x23a8c1=path[_0x45ca01(0x1a1)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x45ca01(0x1c7)](0x24)+'.mp4');fs[_0x45ca01(0x1ad)](_0x23a8c1,_0x56849e),await new Promise((_0x1f7629,_0x36077f)=>{const _0x4da58c=_0x45ca01;ff(_0x23a8c1)['on']('error',_0x36077f)['on'](_0x4da58c(0x1ca),()=>_0x1f7629(!![]))[_0x4da58c(0x1c5)]([_0x4da58c(0x1bc),_0x4da58c(0x1c9),'-vf',_0x4da58c(0x1cf),_0x4da58c(0x1d0),'0',_0x4da58c(0x1aa),_0x4da58c(0x1b5),'-t',_0x4da58c(0x1b7),_0x4da58c(0x19c),_0x4da58c(0x1a8),_0x4da58c(0x1c2),_0x4da58c(0x1ae),'0'])[_0x4da58c(0x1b1)](_0x4da58c(0x1af))[_0x4da58c(0x1b0)](_0x3085a0);});const _0x241571=fs[_0x45ca01(0x1a2)](_0x3085a0);return fs[_0x45ca01(0x1ba)](_0x3085a0),fs[_0x45ca01(0x1ba)](_0x23a8c1),_0x241571;}function _0x29de(_0x36a078,_0x207663){const _0x1cc8db=_0x1cc8();return _0x29de=function(_0x29de54,_0x46cfda){_0x29de54=_0x29de54-0x19b;let _0x2c2d4c=_0x1cc8db[_0x29de54];return _0x2c2d4c;},_0x29de(_0x36a078,_0x207663);}async function writeExifImg(_0x113b0b,_0x2bd4de){const _0x3d5140=_0x2f11de;let _0x4fc100=await imageToWebp(_0x113b0b);const _0x5d146=path[_0x3d5140(0x1a1)](tmpdir(),Crypto[_0x3d5140(0x1a9)](0x6)[_0x3d5140(0x1d3)](0x0,0x6)[_0x3d5140(0x1c7)](0x24)+'.webp'),_0x555ab6=path[_0x3d5140(0x1a1)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x3d5140(0x1c7)](0x24)+_0x3d5140(0x1c4));fs[_0x3d5140(0x1ad)](_0x5d146,_0x4fc100);if(_0x2bd4de[_0x3d5140(0x1b6)]||_0x2bd4de[_0x3d5140(0x1bd)]){const _0x36b657=new webp[(_0x3d5140(0x1d1))](),_0x1ab379={'sticker-pack-id':_0x3d5140(0x1a4),'sticker-pack-name':_0x2bd4de[_0x3d5140(0x1b6)],'sticker-pack-publisher':_0x2bd4de['author'],'emojis':_0x2bd4de[_0x3d5140(0x1c8)]?_0x2bd4de[_0x3d5140(0x1c8)]:['']},_0x4d907d=Buffer[_0x3d5140(0x1cb)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3b0ecf=Buffer[_0x3d5140(0x1cb)](JSON['stringify'](_0x1ab379),'utf-8'),_0x2dfc6f=Buffer[_0x3d5140(0x1d4)]([_0x4d907d,_0x3b0ecf]);return _0x2dfc6f[_0x3d5140(0x1a6)](_0x3b0ecf[_0x3d5140(0x1b2)],0xe,0x4),await _0x36b657[_0x3d5140(0x1bb)](_0x5d146),fs[_0x3d5140(0x1ba)](_0x5d146),_0x36b657[_0x3d5140(0x1cc)]=_0x2dfc6f,await _0x36b657[_0x3d5140(0x1b0)](_0x555ab6),_0x555ab6;}}async function writeExifVid(_0x42e16b,_0x4bbcd3){const _0x308c70=_0x2f11de;let _0x461cfd=await videoToWebp(_0x42e16b);const _0x74c7c6=path[_0x308c70(0x1a1)](tmpdir(),Crypto[_0x308c70(0x1a9)](0x6)[_0x308c70(0x1d3)](0x0,0x6)['toString'](0x24)+_0x308c70(0x1c4)),_0x2c70ea=path['join'](tmpdir(),Crypto[_0x308c70(0x1a9)](0x6)[_0x308c70(0x1d3)](0x0,0x6)[_0x308c70(0x1c7)](0x24)+'.webp');fs['writeFileSync'](_0x74c7c6,_0x461cfd);if(_0x4bbcd3[_0x308c70(0x1b6)]||_0x4bbcd3[_0x308c70(0x1bd)]){const _0x43b8a5=new webp[(_0x308c70(0x1d1))](),_0x3aff12={'sticker-pack-id':_0x308c70(0x1a4),'sticker-pack-name':_0x4bbcd3[_0x308c70(0x1b6)],'sticker-pack-publisher':_0x4bbcd3[_0x308c70(0x1bd)],'emojis':_0x4bbcd3[_0x308c70(0x1c8)]?_0x4bbcd3[_0x308c70(0x1c8)]:['']},_0x3eb43e=Buffer[_0x308c70(0x1cb)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1e2031=Buffer[_0x308c70(0x1cb)](JSON['stringify'](_0x3aff12),_0x308c70(0x1d2)),_0x477f85=Buffer['concat']([_0x3eb43e,_0x1e2031]);return _0x477f85[_0x308c70(0x1a6)](_0x1e2031[_0x308c70(0x1b2)],0xe,0x4),await _0x43b8a5[_0x308c70(0x1bb)](_0x74c7c6),fs[_0x308c70(0x1ba)](_0x74c7c6),_0x43b8a5[_0x308c70(0x1cc)]=_0x477f85,await _0x43b8a5['save'](_0x2c70ea),_0x2c70ea;}}async function writeExif(_0x5cafd5,_0x40a53c){const _0x540622=_0x2f11de;let _0x500500=/webp/['test'](_0x5cafd5[_0x540622(0x19e)])?_0x5cafd5[_0x540622(0x1b4)]:/image/['test'](_0x5cafd5[_0x540622(0x19e)])?await imageToWebp(_0x5cafd5[_0x540622(0x1b4)]):/video/[_0x540622(0x1a0)](_0x5cafd5[_0x540622(0x19e)])?await videoToWebp(_0x5cafd5[_0x540622(0x1b4)]):'';const _0x2338ca=path[_0x540622(0x1a1)](tmpdir(),Crypto['randomBytes'](0x6)[_0x540622(0x1d3)](0x0,0x6)['toString'](0x24)+_0x540622(0x1c4)),_0x39dc90=path['join'](tmpdir(),Crypto[_0x540622(0x1a9)](0x6)[_0x540622(0x1d3)](0x0,0x6)[_0x540622(0x1c7)](0x24)+_0x540622(0x1c4));fs[_0x540622(0x1ad)](_0x2338ca,_0x500500);if(_0x40a53c['packname']||_0x40a53c[_0x540622(0x1bd)]){const _0x23c249=new webp['Image'](),_0x2da7a3={'sticker-pack-id':'https://luna-bot-ofc.github.io/terms-and-conditions.html','sticker-pack-name':_0x40a53c[_0x540622(0x1b6)],'sticker-pack-publisher':_0x40a53c[_0x540622(0x1bd)],'emojis':_0x40a53c['categories']?_0x40a53c[_0x540622(0x1c8)]:['']},_0x31f906=Buffer[_0x540622(0x1cb)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x43bb01=Buffer[_0x540622(0x1cb)](JSON[_0x540622(0x1a3)](_0x2da7a3),'utf-8'),_0x19f458=Buffer['concat']([_0x31f906,_0x43bb01]);return _0x19f458[_0x540622(0x1a6)](_0x43bb01[_0x540622(0x1b2)],0xe,0x4),await _0x23c249['load'](_0x2338ca),fs[_0x540622(0x1ba)](_0x2338ca),_0x23c249[_0x540622(0x1cc)]=_0x19f458,await _0x23c249[_0x540622(0x1b0)](_0x39dc90),_0x39dc90;}}module['exports']={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};
